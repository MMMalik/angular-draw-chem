!function(){"use strict";angular.module("mmAngularDrawChem",["ngSanitize"]).config(["$sanitizeProvider",function(a){a.enableSvg()}])}(),function(){"use strict";function a(a,b,c,d){return{templateUrl:"draw-chem-editor.html",scope:{showEditor:"="},link:function(e,f,g){e.dialogStyle={},g.width&&(e.dialogStyle.width=g.width),g.height&&(e.dialogStyle.height=g.height),e.closeEditor=function(){c.closeEditor()},e.content=function(){return d.trustAsHtml(c.getContent())},e.chosenStructure,e.customButtons=[],angular.forEach(b.custom,function(a){e.customButtons.push({name:a.name,choose:function(){e.chosenStructure=a.structure}})}),e.drawShape=function(){var b=a.draw(e.chosenStructure,"cmpd1");c.setContent(b)}}}}angular.module("mmAngularDrawChem").directive("drawChemEditor",a),a.$inject=["DrawChemShapes","DrawChemStructures","DrawChem","$sce"]}(),function(){"use strict";function a(){function a(a){for(var b=0;b<f.length;b++)if(f[b].name===a)return!0;return!1}function b(a){for(var b=0;b<f.length;b++)if(f[b].name===a)return f[b]}function c(a,b){var c;for(c=0;c<f.length;c++)if(f[c].name===b)return f[c].content=a;f.push({name:b,content:a})}var d={},e=!1,f=[],g={};return d.showEditor=function(){return e},d.runEditor=function(c){e=!0,a(c)||f.push({name:c,content:""}),g=b(c)},d.getContent=function(a){if("string"==typeof a){var c=b(a);return"undefined"==typeof c?"":c.content}return g.content},d.setContent=function(a,b){"undefined"==typeof b?g.content=a:c(a,b)},d.closeEditor=function(){e=!1,g={}},d.clearContent=function(a){"string"==typeof a?c("",a):g.content=""},d}angular.module("mmAngularDrawChem").factory("DrawChem",a)}(),function(){"use strict";function a(){function a(a,b){this.element=a,this.id=b,this.scale=1,this.transformAttr="",this.styleAttr="stroke: black; stroke-width: "+.48*this.scale+"; fill: none;"}function b(a){function b(a,c,e){var f,g,h;for(c.length>0&&(e.push("l"),e.push(c[0].coords),b(c[0].coords,c[0].bonds,e)),f=1;f<c.length;f+=1)h=c[f].coords,g=d.push(["M",a,"l",h]),b(h,c[f].bonds,d[g-1])}function c(){var a,b,c,e,f,g=[];for(a=0;a<d.length;a+=1){for(c=d[a],f="",b=0;b<c.length;b+=1)e=c[b],f+="string"==typeof e?e+" ":e[0]+" "+e[1]+" ";g.push(f)}return g}var d=[],e=d.push(["M",a[0].coords]);return b(a[0].coords,a[0].bonds,d[e-1]),c()}a.prototype.wrap=function(a,b){var c={};return"g"!==a||b||(b=c,b.key="id",b.val=this.id),b?this.element="<"+a+" "+b.key+"='"+b.val+"'>"+this.element+"</"+a+">":this.element="<"+a+">"+this.element+"</"+a+">",this},a.prototype.transform=function(a,b){return this.transformAttr&&(this.transformAttr+=" "),this.transformAttr+=a+"("+b.x,b.y&&(this.transformAttr+=","+b.y),this.transformAttr+=")",this},a.prototype.style=function(a){},a.prototype.generateUse=function(){return"<use xmlns:xlink='http://www.w3.org/1999/xlink' xlink:href='#"+this.id+"' transform='"+this.transformAttr+"' style='"+this.styleAttr+"'></use>"},a.prototype.generate=function(){return this.element+=this.generateUse(),this.wrap("svg").element};var c={};return c.draw=function(c,d){function e(){var a="";return g.forEach(function(b){a+="<path d='"+b+"'></path>"}),a}var f,g=b(c);return f=new a(e(),d),f.wrap("g").wrap("defs").generate()},c}angular.module("mmAngularDrawChem").factory("DrawChemShapes",a)}(),function(){"use strict";function a(){var a={};return a.custom=[{name:"benzene",structure:[{coords:[100,100],bonds:[{coords:[200,100],bonds:[]},{coords:[100,200],bonds:[]},{coords:[50,50],bonds:[]}]}]}],a}angular.module("mmAngularDrawChem").factory("DrawChemStructures",a)}();