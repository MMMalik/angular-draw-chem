!function(){"use strict";angular.module("mmAngularDrawChem",["ngSanitize"]).config(["$sanitizeProvider",function(a){a.enableSvg()}])}(),function(){"use strict";function a(a,b,c,d,e){return{templateUrl:"draw-chem-editor.html",scope:{showEditor:"="},link:function(e,f,g){e.dialogStyle={},g.width&&(e.dialogStyle.width=g.width),g.height&&(e.dialogStyle.height=g.height),e.closeEditor=function(){c.closeEditor()},e.content=function(){return d.trustAsHtml(c.getContent())},e.clear=function(){c.clearContent()},e.transfer=function(){c.transferContent()},e.chosenStructure,e.currentStructure,e.customButtons=[],angular.forEach(b.custom,function(a){e.customButtons.push({name:a.name,choose:function(){e.chosenStructure=a.structure}})}),e.drawShape=function(b){function d(){var a=f.find("dc-content")[0],c=[parseFloat((b.clientX-a.getBoundingClientRect().left-2).toFixed(2)),parseFloat((b.clientY-a.getBoundingClientRect().top-2).toFixed(2))];return c}function g(){""===c.getContent()?e.currentStructure=angular.copy(e.chosenStructure):a.modifyStructure(e.currentStructure,e.chosenStructure,h)}var h=d(),i="";g(),i=a.draw(e.currentStructure,"cmpd1").transform("translate",h).generate(),c.setContent(i)}}}}angular.module("mmAngularDrawChem").directive("drawChemEditor",a),a.$inject=["DrawChemShapes","DrawChemStructures","DrawChem","$sce","$window"]}(),function(){"use strict";function a(a){function b(b,c){this.element=b,this.id=c,this.scale=1,this.transformAttr="",this.style={path:{stroke:"black","stroke-width":a.BOND_WIDTH*this.scale,fill:"none"},"circle:hover":{opacity:"0.3",stroke:"black","stroke-width":a.BOND_WIDTH*this.scale},circle:{opacity:"0"}}}var c={};return b.prototype.wrap=function(a,b){var c,d={};return"g"!==a||b||(b=d,b.id=this.id),b?(c="<"+a+" ",angular.forEach(b,function(a,b){c+=b+"='"+a+"' "}),this.element=c+">"+this.element+"</"+a+">"):this.element="<"+a+">"+this.element+"</"+a+">",this},b.prototype.transform=function(a,b){return this.transformAttr&&(this.transformAttr+=" "),this.transformAttr+=a+"("+b[0],b[1]&&(this.transformAttr+=","+b[1]),this.transformAttr+=")",this},b.prototype.style=function(a){},b.prototype.generateUse=function(){return"<use xmlns:xlink='http://www.w3.org/1999/xlink' xlink:href='#"+this.id+"' transform='"+this.transformAttr+"'></use>"},b.prototype.generateStyle=function(){var a='<style type="text/css">';return angular.forEach(this.style,function(b,c){a+=c+"{",angular.forEach(b,function(b,c){a+=c+":"+b+";"}),a+="}"}),a+"</style>"},b.prototype.generate=function(){return this.element+=this.generateUse(),this.wrap("svg").element},c.Shape=b,c}angular.module("mmAngularDrawChem").factory("DCShape",a),a.$inject=["DrawChemConst"]}(),function(){"use strict";function a(){function a(a,b){this.name=a,this.structure=b}var b={};return b.Structure=a,b}angular.module("mmAngularDrawChem").factory("DCStructure",a)}(),function(){"use strict";function a(){var a={};return a.BOND_LENGTH=20,a.WIDTH_TO_LENGTH=.04,a.BOND_WIDTH=parseFloat((a.BOND_LENGTH*a.WIDTH_TO_LENGTH).toFixed(2)),a.BOND_N=[0,-a.BOND_LENGTH],a.BOND_S=[0,a.BOND_LENGTH],a.BOND_E=[parseFloat((a.BOND_LENGTH*Math.sqrt(3)/2).toFixed(2)),0],a.BOND_W=[-parseFloat((a.BOND_LENGTH*Math.sqrt(3)/2).toFixed(2)),0],a.BOND_NE=[parseFloat((a.BOND_LENGTH*Math.sqrt(3)/2).toFixed(2)),-a.BOND_LENGTH/2],a.BOND_NW=[-parseFloat((a.BOND_LENGTH*Math.sqrt(3)/2).toFixed(2)),-a.BOND_LENGTH/2],a.BOND_SE=[parseFloat((a.BOND_LENGTH*Math.sqrt(3)/2).toFixed(2)),a.BOND_LENGTH/2],a.BOND_SW=[-parseFloat((a.BOND_LENGTH*Math.sqrt(3)/2).toFixed(2)),a.BOND_LENGTH/2],a}angular.module("mmAngularDrawChem").factory("DrawChemConst",a)}(),function(){"use strict";function a(){function a(a){for(var b=0;b<f.length;b++)if(f[b].name===a)return!0;return!1}function b(a){for(var b=0;b<f.length;b++)if(f[b].name===a)return f[b]}function c(a,b){var c;for(c=0;c<f.length;c++)if(f[c].name===b)return f[c].content=a;f.push({name:b,content:a})}var d={},e=!1,f=[],g={};return d.showEditor=function(){return e},d.runEditor=function(c){var d;e=!0,a(c)||f.push({name:c,content:""}),d=b(c),g.name=d.name,g.content=d.content},d.getContent=function(a){if("string"==typeof a){var c=b(a);return"undefined"==typeof c?"":c.content}return g.content},d.setContent=function(a,b){"undefined"==typeof b?g.content=a:c(a,b)},d.transferContent=function(){c(g.content,g.name)},d.closeEditor=function(){e=!1,g={}},d.clearContent=function(a){"string"==typeof a?c("",a):g.content=""},d}angular.module("mmAngularDrawChem").factory("DrawChem",a)}(),function(){"use strict";function a(a,b){function c(a){function c(a,b,d){var h,i,j;for(b.length>0&&(f.push([f[f.length-1][0]+b[0].coords[0],f[f.length-1][1]+b[0].coords[1],g]),d.push("l"),d.push(b[0].coords),c(b[0].coords,b[0].bonds,d)),h=1;h<b.length;h+=1)j=b[h].coords,f.push([a[0]+b[h].coords[0],a[1]+b[h].coords[1],g]),i=e.push(["M",a,"l",j]),c(j,b[h].bonds,e[i-1])}function d(){var a,b,c,d,f,g=[];for(a=0;a<e.length;a+=1){for(c=e[a],f="",b=0;b<c.length;b+=1)d=c[b],f+="string"==typeof d?d+" ":d[0]+" "+d[1]+" ";g.push(f)}return g}var e=[],f=[],g=.12*b.BOND_LENGTH,h=e.push(["M",a[0].coords]);return f.push([a[0].coords[0],a[0].coords[1],g]),c(a[0].coords,a[0].bonds,e[h-1]),{paths:d(),circles:f}}var d={};return d.draw=function(b,d){function e(){var a="";return h.forEach(function(b){a+="<path d='"+b+"'></path>"}),i.forEach(function(b){a+="<circle cx='"+b[0]+"' cy='"+b[1]+"' r='"+b[2]+"' ></circle>"}),a}var f,g=c(b),h=g.paths,i=g.circles;return f=new a.Shape(e(),d),f.element=f.generateStyle()+f.element,f.wrap("g").wrap("defs")},d}angular.module("mmAngularDrawChem").factory("DrawChemShapes",a),a.$inject=["DCShape","DrawChemConst"]}(),function(){"use strict";function a(a,b){var c,d,e={},f=a.BOND_N,g=a.BOND_S,h=(a.BOND_W,a.BOND_E,a.BOND_NE,a.BOND_NW),i=a.BOND_SE,j=a.BOND_SW;return c=new b.Structure("benzene",[{coords:[0,0],bonds:[{coords:i,bonds:[{coords:g,bonds:[{coords:j,bonds:[{coords:h,bonds:[{coords:f,bonds:[]}]}]}]}]},{coords:j,bonds:[]}]}]),d=new b.Structure("single bond",[{coords:[0,0],bonds:[{coords:h,bonds:[]}]}]),e.custom=[c,d],e}angular.module("mmAngularDrawChem").factory("DrawChemStructures",a),a.$inject=["DrawChemConst","DCStructure"]}();